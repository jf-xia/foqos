# EmilyiPhone 娱乐组配置测试执行指南

## ✅ 前置步骤完成状态

- [x] 应用已构建成功
- [x] 应用已安装到 EmilyiPhone 设备
- [x] 应用已启动（PID: 1577）
- [x] 准备就绪

**设备信息**：
- 设备: EmilyiPhone (iPhone 13)
- iOS 版本: 26.2
- 应用: ZenBound (com.lxt.ZenBound)
- 安装路径: `/private/var/containers/Bundle/Application/DD507050-0AF9-4E79-A0EF-AAFB94611095/ZenBound.app/`

---

## 📋 测试场景 1: 权限检查 ⭐⭐⭐ 高优先级

**目标**: 验证应用能正确检查和请求屏幕时间权限

### 📱 在 EmilyiPhone 上执行的步骤

#### 步骤 1.1: 导航到娱乐组配置测试页面

1. **在主屏上**，确认 ZenBound 应用已打开
   - 如果看不到应用，在 Spotlight 搜索中输入 "ZenBound"
   
2. **点击菜单按钮**
   - 点击屏幕右上角的菜单图标 (☰) 或点击 "Scenarios"
   - 如果有导航栏，向下滚动页面

3. **选择测试场景**
   - 找到 "Entertainment Group Configuration" 项
   - 点击进入此场景

#### 步骤 1.2: 检查权限状态

4. **观察权限状态卡片**
   - 应该看到 "Step 1: Authorization Check" 的卡片
   - 查看当前权限状态：
     - ✅ 如果显示 "✅ Authorized" → 权限已授予，进入步骤 1.4
     - ❌ 如果显示 "❌ Not Authorized" → 需要授权，进入步骤 1.3

#### 步骤 1.3: 请求权限（如果需要）

5. **点击 "Request Authorization" 按钮**
   - 点击卡片中的 "Request Authorization" 按钮
   - 等待系统权限对话框出现

6. **在系统弹窗中授予权限**
   - 系统弹窗显示: "ZenBound" 想访问您的屏幕时间
   - 点击 **"Allow"** 按钮授予权限
   - 等待返回应用（通常 1-2 秒）

#### 步骤 1.4: 验证权限授予结果

7. **检查权限状态更新**
   - 权限卡片应该显示为 ✅ "Authorized"
   - 向下滚动查看日志部分
   - 应该看到日志中出现：`✅ Screen Time authorization successful`

### ✓ 测试场景 1 验证清单

- [ ] 步骤 1.1: 成功导航到 Entertainment Group Configuration 页面
- [ ] 步骤 1.2: 看到权限状态卡片
- [ ] 步骤 1.3: 系统权限弹窗出现
- [ ] 步骤 1.4: 权限状态显示为已授予
- [ ] 日志中显示成功信息

### 预期结果

```
✅ 权限检查场景通过
   - 系统弹窗出现并允许
   - 权限状态更新为已授予
   - 日志显示: "✅ Screen Time authorization successful"
   - 可以继续到下一步
```

---

## 🎮 测试场景 2: App 选择

**目标**: 验证能够正确选择和显示娱乐应用

### 📱 在 EmilyiPhone 上执行的步骤

#### 步骤 2.1: 进入 App 选择步骤

1. **在权限检查通过后**
   - 向下滚动页面
   - 找到 "Step 2: App Selection" 卡片

#### 步骤 2.2: 打开 App 选择器

2. **点击 "Select Entertainment Apps" 按钮**
   - 在 App Selection 卡片中找到此按钮
   - 点击按钮

3. **FamilyActivityPicker 应该打开**
   - 屏幕应该显示可用的应用和类别列表
   - 这个选择器会显示：
     - 社交应用 (Instagram, TikTok, Snapchat 等)
     - 游戏应用
     - 娱乐类别
     - 网站分类

#### 步骤 2.3: 选择应用

4. **选择 3-5 个应用**
   - 向下滚动浏览可用应用
   - 点击以下应用的复选框（如果设备上有）：
     - Instagram (勾选)
     - TikTok (勾选)
     - YouTube (勾选)
     - Facebook (勾选)
     - 或其他社交/娱乐应用

5. **或选择应用类别**
   - 找到应用类别列表（如果显示）
   - 勾选 "Entertainment" 或 "Games" 类别

#### 步骤 2.4: 完成选择

6. **点击 "Done" 按钮**
   - 完成 App 选择
   - 返回配置页面

#### 步骤 2.5: 验证选择结果

7. **检查选择结果显示**
   - 应该显示已选择的应用数量
   - 应该显示已选择的类别数量
   - 向下滚动查看日志
   - 日志应该显示类似信息：
     - `✅ Entertainment apps selected: 4 apps, 2 categories`

### ✓ 测试场景 2 验证清单

- [ ] 步骤 2.1: 找到 App Selection 卡片
- [ ] 步骤 2.2: FamilyActivityPicker 成功打开
- [ ] 步骤 2.3: 能够选择多个应用
- [ ] 步骤 2.4: 成功完成选择
- [ ] 步骤 2.5: 所选应用正确显示

### 预期结果

```
✅ App 选择场景通过
   - FamilyActivityPicker 正常打开
   - 能选择多个应用和类别
   - 返回后显示选择摘要
   - 日志显示成功信息
```

---

## ⏰ 测试场景 3: 时间限制配置

**目标**: 验证时间限制设置正确，并能正确展示

### 📱 在 EmilyiPhone 上执行的步骤

#### 步骤 3.1: 进入时间限制配置

1. **向下滚动到 Step 3**
   - 找到 "Step 3: Time Limits Configuration" 卡片

#### 步骤 3.2: 配置每小时限制

2. **在 "Hourly Limit Settings" 部分**
   - 查看当前的每小时可用时长选择器
   - 选择不同的时长选项：
     - 10 分钟
     - 15 分钟（推荐）
     - 20 分钟
     - 30 分钟

3. **观察可视化时间分配图表**
   - 应该看到一个圆形图表或进度条
   - 显示可用时间与强制休息时间的比例
   - 当选择不同时长时，图表应该更新

#### 步骤 3.3: 配置每日限制

4. **在 "Daily Limit Settings" 部分**
   - 查看每日总限制设置
   - 通常为 60-240 分钟范围
   - 调整滑块或选择器

#### 步骤 3.4: 启用/禁用限制

5. **切换 "Enable Hourly Limit" 开关**
   - 找到此开关
   - 打开 (On) 和关闭 (Off) 各一次
   - 观察 UI 变化

6. **检查周末设置**
   - 找到 "Enable on Weekends" 开关
   - 确认其工作状态

#### 步骤 3.5: 验证配置

7. **向下滚动查看日志**
   - 应该看到配置变更的日志记录
   - 日志应该包含类似内容：
     - `✅ Hourly limit set to: 15 minutes`
     - `✅ Daily limit configured: 120 minutes`
     - `✅ Hourly limit monitoring enabled`

### ✓ 测试场景 3 验证清单

- [ ] 步骤 3.1: 找到 Time Limits Configuration 卡片
- [ ] 步骤 3.2: 每小时限制选择器正常工作
- [ ] 步骤 3.3: 图表随选择正确更新
- [ ] 步骤 3.4: 开关正常工作
- [ ] 步骤 3.5: 日志显示配置变更

### 预期结果

```
✅ 时间限制配置场景通过
   - 时间选择器正常工作
   - UI 图表正确更新
   - 所有开关正常工作
   - 日志显示配置信息
```

---

## 🔍 故障排除

### 问题 1: 权限弹窗未出现
**解决方案**:
1. 确保设备已解锁
2. 重新点击 "Request Authorization" 按钮
3. 检查设备是否已启用屏幕时间: 设置 > 屏幕时间 > 启用

### 问题 2: App Picker 无法打开
**解决方案**:
1. 检查权限是否已授予
2. 重启应用
3. 检查控制中心中的屏幕时间是否已启用

### 问题 3: 应用崩溃或显示错误
**解决方案**:
1. 查看 Console.app 中的日志
2. 检查 Xcode 的控制台输出
3. 重新启动应用

### 问题 4: 看不到日志信息
**解决方案**:
1. 确保向下滚动页面
2. 可能需要等待 1-2 秒才能显示日志
3. 检查应用是否在调试模式下运行

---

## 📝 测试结果记录

请在 [TEST_RESULTS_RECORD.md](TEST_RESULTS_RECORD.md) 中记录测试结果：

| 测试场景 | 状态 | 备注 |
|---------|------|------|
| 场景 1: 权限检查 | PASS/FAIL | ________________ |
| 场景 2: App 选择 | PASS/FAIL | ________________ |
| 场景 3: 时间限制 | PASS/FAIL | ________________ |

---

## ✅ 后续步骤

1. **完成所有三个测试场景**
2. **在 TEST_RESULTS_RECORD.md 中记录结果**
3. **如有问题，记录错误信息和截图**
4. **运行任何需要的修复和重新测试**

---

**测试开始时间**: 2026-01-26 22:16  
**应用版本**: Debug Build  
**构建状态**: ✅ 成功  
**安装状态**: ✅ 成功  
**启动状态**: ✅ 成功
